<!DOCTYPE html>
<html>

<head>
    <title>Signup</title>
    <link rel="stylesheet" type="text/css" href="../styles/signup.css">
    <link rel="stylesheet" type="text/css" href="../styles/socialmedia.css">
    <script src="https://smtpjs.com/v3/smtp.js"></script>
    <script src="../scripts/email.js"></script>
</head>

<body>
    <nav>
        <div class="topnav">
            <a href="../index.html">Home</a>
            <a href="login.html">Login</a>
            <a href="signup.html">Signup</a>
            <a href="immigrants.html">Immigrant Services</a>
            <a href="visitors.html">Visitor Services</a>
            <a href="#our-partners">Our Partners</a>
            <a href="#blog">Blog</a>
            <a href="contactus.html">Contact Us</a>
            <a href="aboutus.html">About Us</a>
        </div>
    </nav>
    <div class="signup-box">
        <img src="../resources/icons/material-login-icon.png" class="signup-icon">
        <h2>Signup</h2>
        <form onsubmit="return signup(this);">
            <p>First name</p>
            <input type="text" name="fname-field" placeholder="First name">
            <p>Last name</p>
            <input type="text" name="lname-field" placeholder="Last name">
            <br>
            <p>Username</p>
            <input type="text" name="username-field" placeholder="Username">
            <p>Password</p>
            <input type="password" name="password-field" placeholder="Password">
            <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <p>Email</p>
            <input type="text" name="email-field" placeholder="Email">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <p>Phone</p>
            <input type="text" name="phone-field" placeholder="Phone">
            <br> &nbsp;&nbsp;
            <p>Address</p>
            <input type="text" name="addr-field" placeholder="Address">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <p>City</p>
            <input type="text" name="city-field" placeholder="City">
            <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <p>State</p>
            <input type="text" name="state-field" placeholder="State">&nbsp;&nbsp;&nbsp;
            <p>Country</p>
            <input type="text" name="country-field" placeholder="Country">
            <br>
            <input type="radio" id="admin-radio" name="role-radio" value="admin"><label for="admin-radio">
                Admin</label><br>
            <input type="radio" id="immigrant-radio" name="role-radio" value="immigrant" checked><label for="immigrant-radio"> Immigrant</label><br>
            <input type="submit" id="submit-btn" name="submit-button" value="Signup"><br>
            <a href="login.html">Already have an account? Login.</a>
        </form>
    </div>
</body>

<script src="https://smtpjs.com/v3/smtp.js"></script>

<!--// 05048AA9CB8C655DE103D89F5D7E98CB4364 // 6C45A2BF1876A24149007FD19363B5F775763EF021265DCB0ADEF78428C52FBF2CA77470CADE8261CA39286FDBA81750 // fa949447-0356-40ca-a69e-a7023306b485-->
<script>
    function signup(form) {
        var f_name = form.elements["fname-field"].value;
        if ((f_name == "") || (f_name === undefined) || ([...f_name].length = 0)) {
            alert("Please enter a valid first name");
            return false;
        }
        var l_name = form.elements["lname-field"].value;
        if ((l_name == "") || (l_name === undefined) || ([...l_name].length = 0)) {
            alert("Please enter a valid last name");
            return false;
        }
        var username = form.elements["username-field"].value;
        if ((username == "") || (username === undefined) || ([...username].length = 0)) {
            alert("Please enter a valid username");
            return false;
        }
        var password = form.elements["password-field"].value;
        if ((password == "") || (password === undefined) || ([...password].length = 0)) {
            alert("Please enter a valid password");
            return false;
        }
        var email = form.elements["email-field"].value;
        if ((email == "") || (email === undefined) || ([...email].length = 0) || (!email.includes('@'))) {
            alert("Please enter a valid email");
            return false;
        }
        var phone = form.elements["phone-field"].value;
        if ((phone == "") || (phone === undefined) || ([...phone].length < 7)) {
            alert("Please enter a valid phone number");
            return false;
        }
        var role;
        var role_element = document.getElementsByName('role-radio');
        for (i = 0; i < role_element.length; i++) {
            if (role_element[i].checked) {
                role = role_element[i].value;
            }
        }

        var subject = "Registration for Immigrant portal";
        var body = "<html><h2>Registration for Immigrants Portal Successful</h2><br><strong>Username: </strong><em>" + username + "</em><br><strong>Password: </strong><em>" + password + "</em><br><strong>User level: </strong><em>" + role + "</em><br></html>";
        sendEmail(email, subject, body);

        form.action = "login.html";

        return false;
    }
</script>

</html>